<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · PackageAnalyzer.jl</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>PackageAnalyzer.jl</a></span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#The-PackageV1-struct"><span>The <code>PackageV1</code> struct</span></a></li><li><a class="tocitem" href="#Analyzing-multiple-packages"><span>Analyzing multiple packages</span></a></li><li><a class="tocitem" href="#License-information"><span>License information</span></a></li><li><a class="tocitem" href="#Lines-of-code"><span>Lines of code</span></a></li><li><a class="tocitem" href="#Contributors-to-the-repository"><span>Contributors to the repository</span></a></li><li><a class="tocitem" href="#GitHub-authentication"><span>GitHub authentication</span></a></li></ul></li><li><a class="tocitem" href="api/">API Reference</a></li><li><a class="tocitem" href="serialization/">Saving results</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaEcosystem/PackageAnalyzer.jl/blob/main/docs/src/index.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="PackageAnalyzer.jl"><a class="docs-heading-anchor" href="#PackageAnalyzer.jl">PackageAnalyzer.jl</a><a id="PackageAnalyzer.jl-1"></a><a class="docs-heading-anchor-permalink" href="#PackageAnalyzer.jl" title="Permalink"></a></h1><p>The main functionality of the package is the <a href="api/#PackageAnalyzer.analyze-Tuple{AbstractString}"><code>analyze</code></a> function:</p><pre><code class="language-julia hljs">julia&gt; using PackageAnalyzer

julia&gt; analyze(&quot;Flux&quot;)
PackageV1 Flux:
  * repo: https://github.com/FluxML/Flux.jl.git
  * uuid: 587475ba-b771-5e3f-ad9e-33799f191a9c
  * version: 0.13.6
  * is reachable: true
  * tree hash: 76ca02c7c0cb7b8337f7d2d0eadb46ed03c1e843
  * Julia code in `src`: 5299 lines
  * Julia code in `test`: 3030 lines (36.4% of `test` + `src`)
  * documentation in `docs`: 1856 lines (25.9% of `docs` + `src`)
  * documentation in README: 14 lines
  * has license(s) in file: MIT
    * filename: LICENSE.md
    * OSI approved: true
  * has `docs/make.jl`: true
  * has `test/runtests.jl`: true
  * has continuous integration: true
    * GitHub Actions
    * Buildkite</code></pre><p>The argument is a string, which can be the name of a package, a local path or a URL.</p><p><em>NOTE</em>: the Git repository of the package may be cloned, in order to inspect its content.</p><p>You can also pass the output of <a href="api/#PackageAnalyzer.find_package-Tuple{Union{Base.UUID, AbstractString}}"><code>find_package</code></a> which is used under-the-hood to look up package names in any installed registries. <code>find_package</code> also allows one to specify a package by <code>UUID</code>.</p><pre><code class="language-julia hljs">julia&gt; analyze(find_package(&quot;JuMP&quot;; version=v&quot;1&quot;))
PackageV1 JuMP:
  * repo: https://github.com/jump-dev/JuMP.jl.git
  * uuid: 4076af6c-e467-56ae-b986-b466b2749572
  * version: 1.0.0
  * is reachable: true
  * tree hash: 936e7ebf6c84f0c0202b83bb22461f4ebc5c9969
  * Julia code in `src`: 16906 lines
  * Julia code in `test`: 12777 lines (43.0% of `test` + `src`)
  * documentation in `docs`: 15978 lines (48.6% of `docs` + `src`)
  * documentation in README: 79 lines
  * has license(s) in file: MPL-2.0
    * filename: LICENSE.md
    * OSI approved: true
  * has `docs/make.jl`: true
  * has `test/runtests.jl`: true
  * has continuous integration: true
    * GitHub Actions</code></pre><p>Additionally, you can pass in the module itself:</p><pre><code class="language-julia hljs">julia&gt; using PackageAnalyzer

julia&gt; analyze(PackageAnalyzer)
PackageV1 PackageAnalyzer:
  * repo:
  * uuid: e713c705-17e4-4cec-abe0-95bf5bf3e10c
  * version: nothing
  * is reachable: true
  * tree hash: 7bfd2ab7049d92809eb18eed1b0548c7e07ec150
  * Julia code in `src`: 912 lines
  * Julia code in `test`: 276 lines (23.2% of `test` + `src`)
  * documentation in `docs`: 263 lines (22.4% of `docs` + `src`)
  * documentation in README: 44 lines
  * has license(s) in file: MIT
    * filename: LICENSE
    * OSI approved: true
  * has `docs/make.jl`: true
  * has `test/runtests.jl`: true
  * has continuous integration: true
    * GitHub Actions</code></pre><p>You can also directly analyze the source code of a package via <a href="api/#PackageAnalyzer.analyze-Tuple{AbstractString}"><code>analyze</code></a> by passing in the path to it, for example with the <code>pkgdir</code> function:</p><pre><code class="language-julia hljs">julia&gt; using PackageAnalyzer, DataFrames

julia&gt; analyze(pkgdir(DataFrames))
PackageV1 DataFrames:
  * repo:
  * uuid: a93c6f00-e57d-5684-b7b6-d8193f3e46c0
  * version: 0.0.0
  * is reachable: true
  * tree hash: db2a9cb664fcea7836da4b414c3278d71dd602d2
  * Julia code in `src`: 15628 lines
  * Julia code in `test`: 21089 lines (57.4% of `test` + `src`)
  * documentation in `docs`: 6270 lines (28.6% of `docs` + `src`)
  * documentation in README: 21 lines
  * has license(s) in file: MIT
    * filename: LICENSE.md
    * OSI approved: true
  * has `docs/make.jl`: true
  * has `test/runtests.jl`: true
  * has continuous integration: true
    * GitHub Actions</code></pre><p>You can pass the keyword argument <code>root</code> to specify a directory to store downloaded code.</p><h2 id="The-PackageV1-struct"><a class="docs-heading-anchor" href="#The-PackageV1-struct">The <code>PackageV1</code> struct</a><a id="The-PackageV1-struct-1"></a><a class="docs-heading-anchor-permalink" href="#The-PackageV1-struct" title="Permalink"></a></h2><p>The returned values from <a href="api/#PackageAnalyzer.analyze-Tuple{AbstractString}"><code>analyze</code></a>, and <a href="@ref"><code>analyze!</code></a> are objects of the type <code>PackageV1</code>, which has the following fields:</p><pre><code class="language-julia hljs">struct PackageV1
    name::String # name of the package
    uuid::UUID # uuid of the package
    repo::String # URL of the repository
    subdir::String # subdirectory of the package in the repo
    reachable::Bool # can the repository be cloned?
    docs::Bool # does it have documentation?
    runtests::Bool # does it have the test/runtests.jl file?
    github_actions::Bool # does it use GitHub Actions?
    travis::Bool # does it use Travis CI?
    appveyor::Bool # does it use AppVeyor?
    cirrus::Bool # does it use Cirrus CI?
    circle::Bool # does it use Circle CI?
    drone::Bool # does it use Drone CI?
    buildkite::Bool # does it use Buildkite?
    azure_pipelines::Bool # does it use Azure Pipelines?
    gitlab_pipeline::Bool # does it use Gitlab Pipeline?
    license_files::Vector{LicenseV1}} # a table of all possible license files
    licenses_in_project::Vector{String} # any licenses in the `license` key of the Project.toml
    lines_of_code::Vector{LinesOfCodeV1} # table of lines of code
    contributors::Vector{ContributorsV1} # table of contributor data
    version::Union{String, Missing} # the version number, if a release was analyzed
    tree_hash::String # the tree hash of the code that was analyzed
end</code></pre><p>where:</p><ul><li><code>LicenseV1</code> contains fields <code>license_filename::String, licenses_found::Vector{String}, license_file_percent_covered::Float64</code>,</li><li><code>LinesOfCodeV1</code> contains fields <code>directory::String, language::Symbol, sublanguage::Union{Nothing, Symbol}, files::Int, code::Int, comments::Int, blanks::Int</code>,</li><li>and <code>ContributorsV1</code> contains fields <code>login::Union{String,Missing}, id::Union{Int,Missing}, name::Union{String,Missing}, type::String, contributions::Int</code>.</li></ul><p>Adding additional fields to <code>PackageV1</code> is <em>not</em> considered breaking, and may occur in feature releases of PackageAnalyzer.jl.</p><p>Removing or altering the meaning of existing fields <em>is</em> considered breaking and will only occur in major releases of PackageAnalyzer.jl.</p><h2 id="Analyzing-multiple-packages"><a class="docs-heading-anchor" href="#Analyzing-multiple-packages">Analyzing multiple packages</a><a id="Analyzing-multiple-packages-1"></a><a class="docs-heading-anchor-permalink" href="#Analyzing-multiple-packages" title="Permalink"></a></h2><p>To run the analysis for multiple packages you can either use broadcasting</p><pre><code class="language-julia hljs">analyze.(pkg_entries)</code></pre><p>or use the function <a href="api/#PackageAnalyzer.analyze_packages-Tuple{Any}"><code>analyze_packages(pkg_entries)</code></a> which runs the analysis with multiple threads. Here, <code>pkg_entries</code> may be any valid input to <code>analyze</code>.</p><p>You can use the function <a href="api/#PackageAnalyzer.find_packages"><code>find_packages</code></a> to find all packages in a given registry:</p><pre><code class="language-julia hljs">julia&gt; result = find_packages(; registry=general_registry());

julia&gt; summary(result)
&quot;7213-element Vector{PkgSource}&quot;</code></pre><p>Do not abuse this function!</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>Cloning all the repos in General will take more than 20 GB of disk space and can take up to a few hours to complete.</p></div></div><p>You can also use <code>find_packages_in_manifest</code> to use a Manifest.toml to lookup packages and their versions. Besides handling release dependencies, this should also correctly handle dev&#39;d dependencies, and non-released <code>Pkg.add</code>&#39;d dependencies. The helper <code>analyze_manifest</code> is provided as a convenience to composing <code>find_packages_in_manifest</code> and <a href="api/#PackageAnalyzer.analyze_packages-Tuple{Any}"><code>analyze_packages</code></a>.</p><h2 id="License-information"><a class="docs-heading-anchor" href="#License-information">License information</a><a id="License-information-1"></a><a class="docs-heading-anchor-permalink" href="#License-information" title="Permalink"></a></h2><p>The <code>license_files</code> field of the <code>PackageV1</code> object is a <a href="https://github.com/JuliaData/Tables.jl"><code>Tables.jl</code></a> row table containing much more detailed information about any or all files containing licenses, identified by <a href="https://github.com/google/licensecheck"><code>licensecheck</code></a> via <a href="https://github.com/ericphanson/LicenseCheck.jl">LicenseCheck.jl</a>. For example, <a href="https://github.com/jean-pierreBoth/RandomProjectionTree.jl">RandomProjectionTree.jl</a> is dual licensed under both Apache-2.0 and the MIT license, and provides two separate license files. Interestingly, the README is also identified as containing an Apache-2.0 license; I&#39;ve filed an <a href="https://github.com/google/licensecheck/issues/40">issue</a> to see if this is intentional.</p><pre><code class="language-julia hljs">julia&gt; using PackageAnalyzer, DataFrames

julia&gt; result = analyze(&quot;RandomProjectionTree&quot;);

julia&gt; DataFrame(result.license_files)
3×3 DataFrame
 Row │ license_filename  licenses_found  license_file_percent_covered
     │ String            Vector{String}  Float64
─────┼────────────────────────────────────────────────────────────────
   1 │ LICENSE-APACHE    [&quot;Apache-2.0&quot;]                     100.0
   2 │ LICENSE-MIT       [&quot;MIT&quot;]                            100.0
   3 │ README.md         [&quot;Apache-2.0&quot;]                       6.34921</code></pre><p>Most packages contain a single file containing a license, and so have a single entry in the table.</p><h2 id="Lines-of-code"><a class="docs-heading-anchor" href="#Lines-of-code">Lines of code</a><a id="Lines-of-code-1"></a><a class="docs-heading-anchor-permalink" href="#Lines-of-code" title="Permalink"></a></h2><p>The <code>lines_of_code</code> field of the <code>PackageV1</code> object is a Tables.jl row table containing much more detailed information about the lines of code count (thanks to <code>tokei</code>) and can e.g. be passed to a <code>DataFrame</code> for further analysis.</p><pre><code class="language-julia hljs">julia&gt; using PackageAnalyzer, DataFrames

julia&gt; result = analyze(pkgdir(DataFrames));

julia&gt; DataFrame(result.lines_of_code)
15×7 DataFrame
 Row │ directory        language  sublanguage  files  code   comments  blanks
     │ String           Symbol    Union…       Int64  Int64  Int64     Int64
─────┼────────────────────────────────────────────────────────────────────────
   1 │ test             Julia                     29  17512       359    2264
   2 │ src              Julia                     31  15809       885    1253
   3 │ benchmarks       Julia                      4    245        30      50
   4 │ benchmarks       Shell                      2     15         0       0
   5 │ docs             Julia                      1     45         6       5
   6 │ docs             TOML                       1     11         0       1
   7 │ docs             Markdown                  16      0      3782     662
   8 │ docs             Markdown  Julia            4     30         3       4
   9 │ docs             Markdown  Python           1     13         0       1
  10 │ docs             Markdown  R                1      6         0       0
  11 │ Project.toml     TOML                       1     51         0       4
  12 │ README.md        Markdown                   1      0        21      10
  13 │ NEWS.md          Markdown                   1      0       267      47
  14 │ LICENSE.md       Markdown                   1      0        22       1
  15 │ CONTRIBUTING.md  Markdown                   1      0       138      20</code></pre><h2 id="Contributors-to-the-repository"><a class="docs-heading-anchor" href="#Contributors-to-the-repository">Contributors to the repository</a><a id="Contributors-to-the-repository-1"></a><a class="docs-heading-anchor-permalink" href="#Contributors-to-the-repository" title="Permalink"></a></h2><p>If the package repository is hosted on GitHub and you can use <a href="#GitHub-authentication">GitHub authentication</a>, the list of contributors is added to the <code>contributors</code> field of the <code>PackageV1</code> object.  This is a table which includes the GitHub username (&quot;login&quot;) and the GitHub ID (&quot;id&quot;) for contributors identified as GitHub &quot;users&quot;, and the &quot;name&quot; for contributors identified as &quot;Anonymous&quot; contributors, as well as the number of contributions provided by that user to the repository. This is the data returned from the GitHub API, and there may be people for which some of their contributions are marked as from an anonymous user (possibly more than one!) and some of their contributions are associated to their GitHub username.</p><pre><code class="language-julia hljs">julia&gt; using PackageAnalyzer, DataFrames

julia&gt; result = analyze(&quot;DataFrames&quot;);

julia&gt; df = DataFrame(result.contributors);

julia&gt; sort!(df, :contributions, rev=true)
189×5 DataFrame
 Row │ login                id        name           type       contributions
     │ String?              Int64?    String?        String     Int64
─────┼────────────────────────────────────────────────────────────────────────
   1 │ johnmyleswhite          22064  missing        User                 431
   2 │ bkamins               6187170  missing        User                 412
   3 │ powerdistribution     5247292  missing        User                 232
   4 │ nalimilan             1120448  missing        User                 223
   5 │ garborg               2823840  missing        User                 173
   6 │ quinnj                2896623  missing        User                 104
   7 │ simonster              470884  missing        User                  87
   8 │ missing               missing  Harlan Harris  Anonymous             67
   9 │ cjprybol              3497642  missing        User                  50
  10 │ alyst                  348591  missing        User                  48
  11 │ dmbates                371258  missing        User                  47
  12 │ tshort                 636420  missing        User                  39
  13 │ doobwa                  79467  missing        User                  32
  14 │ HarlanH                130809  missing        User                  32
  15 │ kmsquire               223250  missing        User                  30
  ⋮  │          ⋮              ⋮            ⋮            ⋮            ⋮</code></pre><h2 id="GitHub-authentication"><a class="docs-heading-anchor" href="#GitHub-authentication">GitHub authentication</a><a id="GitHub-authentication-1"></a><a class="docs-heading-anchor-permalink" href="#GitHub-authentication" title="Permalink"></a></h2><p>If you have a <a href="https://docs.github.com/en/github/authenticating-to-github/creating-a-personal-access-token">GitHub Personal Access Token</a>, you can obtain some extra information about packages whose repository is hosted on GitHub (e.g. the list of contributors).  If you store the token as an environment variable called <code>GITHUB_TOKEN</code> or <code>GITHUB_AUTH</code>, this will be automatically used whenever possible, otherwise you can generate a GitHub authentication with the <a href="api/#PackageAnalyzer.github_auth"><code>PackageAnalyzer.github_auth</code></a> function and pass it to the functions accepting the <code>auth::GitHub.Authorization</code> keyword argument.</p></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="api/">API Reference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Sunday 11 June 2023 12:41">Sunday 11 June 2023</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
